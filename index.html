<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resume Skill Extractor</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      body {
        min-height: 100vh;
        margin: 0;
        font-family: 'Montserrat', 'Roboto', sans-serif;
        background: var(--primary-bg);
        color: var(--primary-text);
        transition: background 0.3s, color 0.3s;
        padding-top: 60px; /* Add padding to account for the fixed header */
      }
      :root {
        --primary-bg: #f4f4f4;
        --primary-text: #222;
        --secondary-bg: #fff;
        --accent: #007bff;
        --card-bg: #fff;
        --secondary-text: #555;
      }
      [data-theme="dark"] {
        --primary-bg: #181a1b;
        --primary-text: #f4f4f4;
        --secondary-bg: #23272a;
        --accent: #00bfff; /* Changed for dark blue accent */
        --card-bg: #23272a;
        --secondary-text: #bbb;
        --dark-blue-accent: #1e90ff; /* Added dark blue accent color */
      }
      #root {
        max-width: 1200px;
        margin: 0 auto; /* Remove top margin as padding is added to body */
        padding: 2rem 1rem;
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-start;
      }
      .left-section,
      .right-section {
        flex: 1 1 50%; /* Set flex-basis to 50% for equal initial size */
        min-width: 300px;
        background: rgba(255,255,255,0.18);
        border-radius: 24px;
        box-shadow: 0 8px 40px 0 rgba(0,0,0,0.18), 0 0 0 4px rgba(0,123,255,0.15);
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        border: 2px solid rgba(255,255,255,0.25);
        padding: 2rem;
        transition: all 0.5s ease; /* Add transition for smooth layout changes */
      }
      .left-section {
        text-align: center;
      }
      .right-section {
        text-align: center;
      }
      #extractorCard,
      #historySection {
        background: none;
        box-shadow: none;
        border: none;
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        padding: 0;
        max-width: 100%;
      }
      h2 {
        margin-top: 0;
        color: var(--accent);
        font-family: 'Montserrat', 'Roboto', sans-serif;
        font-size: 2.5rem;
        letter-spacing: 1px;
        text-shadow: 0 2px 8px rgba(0,0,0,0.10);
      }
      ul {
        list-style: none;
        padding: 0;
        text-align: left;
        max-width: 300px;
        margin: 20px auto;
      }
      li {
        margin: 1rem 0;
      }
      a {
        color: var(--accent);
        text-decoration: none;
        font-weight: 600;
        transition: color 0.2s, text-shadow 0.2s;
        text-shadow: 0 1px 4px rgba(0,0,0,0.08);
      }
      a:hover {
        color: #ff9800;
        text-shadow: 0 2px 8px #ff9800aa;
      }
      /* Floating Social Icons */
      .floating-icons {
        position: fixed;
        top: 50%;
        left: 24px;
        transform: translateY(-50%);
        display: flex;
        flex-direction: column;
        gap: 18px;
        z-index: 1000;
      }
      .floating-icons a {
        background: var(--card-bg);
        color: var(--accent);
        border-radius: 50%;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        font-size: 1.4rem;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        border: 2px solid rgba(0,123,255,0.15);
      }
      .floating-icons a:hover {
        background: var(--accent);
        color: #fff;
        box-shadow: 0 0 16px #007bff88;
      }
      /* Theme Toggle */
      .theme-toggle {
        position: fixed;
        top: 24px;
        right: 32px;
        background: var(--card-bg);
        border: none;
        border-radius: 50%;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        font-size: 1.3rem;
        color: var(--accent);
        transition: background 0.2s, color 0.2s;
        z-index: 1100;
        border: 2px solid rgba(0,123,255,0.15);
      }
      .theme-toggle:hover {
        background: var(--accent);
        color: #fff;
        box-shadow: 0 0 16px #007bff88;
      }
      /* Footer */
      footer {
        margin-top: 2.5rem;
        text-align: center;
        color: #888;
        font-size: 1rem;
        letter-spacing: 0.5px;
        text-shadow: 0 1px 4px rgba(0,0,0,0.08);
      }
      /* Responsive */
      @media (max-width: 700px) {
        #root {
          max-width: 98vw;
          padding: 1.2rem 0.5rem 1rem 0.5rem;
        }
        .theme-toggle {
          right: 12px;
          top: 12px;
        }
      }
      @media (max-width: 500px) {
        .floating-icons {
          flex-direction: row;
          top: auto;
          bottom: 16px;
          left: 50%;
          transform: translateX(-50%);
          gap: 16px;
        }
        .theme-toggle {
          top: 12px;
          right: 6px;
        }
        #root {
          margin-top: 0; /* Remove margin-top */
          padding: 1rem 0.5rem;
        }
        .floating-img:not(.corner-image) {
          display: none;
        }
        .left-section, .right-section {
          padding: 1.5rem 1rem;
          min-width: unset;
        }
      }
      #extractorCard {
        max-width: 90%;
        margin: 3.5rem auto 0 auto;
        background: rgba(255,255,255,0.18);
        border-radius: 36px;
        box-shadow: 0 8px 40px 0 rgba(0,0,0,0.18), 0 0 0 6px rgba(0,123,255,0.18);
        padding: 2rem 1rem;
        border: 2px solid rgba(255,255,255,0.25);
        backdrop-filter: blur(18px) saturate(180%);
        -webkit-backdrop-filter: blur(18px) saturate(180%);
        position: relative;
        text-align: center;
        color: var(--primary-text);
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: all 0.5s ease; /* Add transition for smooth layout changes */
      }
      #extractorCard > *:not(.extractor-images) {
        background: var(--card-bg);
        border-radius: 8px;
        width: 100%;
        max-width: 400px;
        margin: 0.5rem auto;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        padding: 0.8rem;
        box-sizing: border-box;
      }
      .extractor-images {
        margin-bottom: 2rem;
      }
      #extractorCard h3 {
        margin-top: 0;
        color: var(--accent);
      }
      #uploadBtn {
        background: var(--accent);
        color: #fff;
        border: none;
        border-radius: 20px;
        padding: 0.6rem 1.5rem;
        font-size: 1rem;
        font-family: inherit;
        font-weight: 500;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        transition: background 0.2s, color 0.2s;
        margin-bottom: 1rem;
        box-shadow: 0 0 8px #007bff44;
        border: 2px solid rgba(0,123,255,0.15);
      }
      #uploadBtn:hover {
        background: #ff9800;
        color: #fff;
        box-shadow: 0 0 16px #ff980088;
      }
      #status {
        color: var(--accent);
        min-height: 24px;
        font-size: 1rem;
        margin: 1rem 0;
      }
      #skillsList {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: center;
        margin-top: 0.5rem;
      }
      .skill-chip {
        padding: 6px 12px;
        border: 1px solid #888;
        border-radius: 20px;
        background-color: #eee;
        color: #222;
        font-size: 0.98rem;
        margin-bottom: 5px;
        transition: background 0.2s, color 0.2s, transform 0.3s ease, opacity 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 4px;
        opacity: 0;
        transform: translateY(10px);
        animation: fadeInChip 0.3s ease-out forwards;
      }
      @keyframes fadeInChip {
          to { transform: translateY(0); opacity: 1; }
      }
      [data-theme="dark"] #extractorCard {
        background: var(--card-bg);
        color: var(--primary-text);
      }
      [data-theme="dark"] .skill-chip {
        background-color: #23272a;
        color: #f4f4f4;
        border: 1px solid #555;
      }
      @media (max-width: 700px) {
        #extractorCard {
          max-width: 98vw;
          padding: 1.2rem 0.5rem 1rem 0.5rem;
          border-radius: 18px;
        }
        .extractor-illustration {
          width: 80px;
          height: 80px;
        }
      }
      .extractor-illustration {
        width: 80px;
        height: 80px;
        object-fit: contain;
        margin-bottom: 1rem;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        background: var(--secondary-bg);
        margin-right: 10px;
        margin-left: 10px;
      }
      .extractor-images {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }
      .extractor-actions {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        margin-bottom: 1.2rem;
      }
      .extractor-file-row {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.7rem;
        width: 100%;
      }
      #resumeFile {
        margin: 0 auto 0.5rem auto;
        display: block;
      }
      #uploadBtn {
        margin: 0.5rem auto 1rem auto;
        display: block;
      }
      /* Decorative corner images */
      .corner-image {
        position: fixed;
        z-index: 900;
        width: 60px;
        height: 60px;
        opacity: 0.7;
        pointer-events: none;
      }
      .corner-image.topleft {
        top: 12px;
        left: 12px;
      }
      .corner-image.topright {
        top: 12px;
        right: 12px;
      }
      .corner-image.bottomleft {
        bottom: 12px;
        left: 12px;
      }
      .corner-image.bottomright {
        bottom: 12px;
        right: 12px;
      }
      @media (max-width: 700px) {
        .corner-image {
          width: 36px;
          height: 36px;
        }
      }
      /* Floating animated SVG shape */
      .floating-svg {
        position: fixed;
        left: 50%;
        top: 0;
        transform: translateX(-50%);
        z-index: 0;
        opacity: 0.18;
        pointer-events: none;
        animation: floatShape 8s ease-in-out infinite alternate;
      }
      @keyframes floatShape {
        0% { transform: translateX(-50%) translateY(0); }
        100% { transform: translateX(-50%) translateY(40px); }
      }
      /* Floating decorative images */
      .floating-img {
        position: fixed;
        z-index: 10;
        width: 40px;
        height: 40px;
        opacity: 0.7;
        pointer-events: none;
        animation: floatY 5s ease-in-out infinite alternate;
      }
      .floating-img.right {
        top: 20%;
        right: 32px;
        animation-delay: 0s;
      }
      .floating-img.left {
        top: 60%;
        left: 32px;
        animation-delay: 2s;
      }
      .floating-img.bottom {
        bottom: 32px;
        left: 50%;
        transform: translateX(-50%);
        animation-delay: 1s;
      }
      @keyframes floatY {
        0% { transform: translateY(0); }
        100% { transform: translateY(-60px); }
      }
      @media (max-width: 700px) {
        .floating-img {
          width: 40px;
          height: 40px;
        }
        .floating-img.right, .floating-img.left {
          right: 8px;
          left: 8px;
        }
        .floating-img.bottom {
          bottom: 8px;
        }
      }
      .float-diag {
        animation: floatDiag 7s ease-in-out infinite alternate;
      }
      .float-diag2 {
        animation: floatDiag2 8s ease-in-out infinite alternate;
      }
      .float-left-right {
        animation: floatLeftRight 6s ease-in-out infinite alternate;
      }
      .float-fast {
        animation: floatY 3s ease-in-out infinite alternate;
      }
      .float-fast2 {
        animation: floatY 2.5s ease-in-out infinite alternate;
      }
      @keyframes floatDiag {
        0% { transform: translateY(0) translateX(0); }
        100% { transform: translateY(-60px) translateX(50px); }
      }
      @keyframes floatDiag2 {
        0% { transform: translateY(0) translateX(0); }
        100% { transform: translateY(-50px) translateX(-50px); }
      }
      @keyframes floatLeftRight {
        0% { transform: translateX(0); }
        100% { transform: translateX(60px); }
      }
      @keyframes floatBelowBox {
        0% { transform: translateX(-50%) translateY(0); }
        100% { transform: translateX(-50%) translateY(-40px); }
      }
      @keyframes floatYExtended {
        0% { transform: translateY(0); }
        100% { transform: translateY(-80px); }
      }
      @keyframes floatXExtended {
        0% { transform: translateX(0); }
        100% { transform: translateX(80px); }
      }
      @keyframes floatDiagExtended {
        0% { transform: translateY(0) translateX(0); }
        100% { transform: translateY(-80px) translateX(80px); }
      }
      @keyframes floatDiagExtended2 {
        0% { transform: translateY(0) translateX(0); }
        100% { transform: translateY(-80px) translateX(-80px); }
      }
      /* Add styles for history section */
      #historySection {
        max-width: 90%;
        margin: 2rem auto 0 auto;
        background: var(--card-bg);
        border-radius: 18px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        padding: 1.5rem;
        color: var(--primary-text);
        text-align: left;
        display: none; /* Initially hide the history section */
      }
      #historySection h3 {
        margin-top: 0;
        color: var(--accent);
      }
      #historyList {
        margin-top: 1rem;
      }
      .history-entry {
        background: var(--secondary-bg);
        border-radius: 8px;
        padding: 0.8rem 1rem;
        margin-bottom: 1rem;
        cursor: pointer;
        transition: background 0.2s, box-shadow 0.2s;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      }
      .history-entry:hover {
        background: var(--primary-bg);
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      }
      .history-entry-info {
        flex-grow: 1;
        margin-right: 1rem;
      }
      .history-entry-info p {
        margin: 0; /* Remove vertical margin to minimize spacing */
        font-size: 0.9rem;
      }
      .history-entry-actions {
        display: flex;
        align-items: center;
      }
      .history-entry-name {
        font-weight: 600;
        margin-bottom: 0.4rem;
        font-size: 1rem;
      }
      .history-entry-name input[type="text"] {
        font-size: 1rem;
        padding: 4px;
        border-radius: 4px;
        border: 1px solid #ccc;
        width: 100%;
      }
      .history-entry-delete {
        color: #ff4d4d;
        cursor: pointer;
        font-size: 1.1rem;
        margin-left: 0.8rem;
        transition: color 0.2s;
      }
      .history-entry-delete:hover {
        color: #ff1a1a;
      }
      #skillSearch {
        box-sizing: border-box;
      }
      .left-section.collapsed-left {
        flex: unset;
        width: 100%; /* Ensure it still takes full width in collapsed state */
        max-width: 100%;
        height: 80px;
        overflow: hidden;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .left-section.collapsed-left h2 {
        margin: 0;
      }
      .left-section.collapsed-left > *:not(h2):not(#expandLeftSectionBtn):not(.external-links-container) {
        display: none;
      }
      .left-section.collapsed-left #expandLeftSectionBtn {
        display: block;
      }
      .right-section.expanded-right {
        flex: unset;
        width: 100%;
        max-width: 100%;
        margin-top: 20px;
      }
      #extractorCard.extractor-split {
        flex-direction: row;
        align-items: flex-start;
      }
      .extractor-left-content {
        flex: 1;
        padding-right: 1rem;
      }
      .extractor-right-content {
        flex: 1;
        min-width: 300px;
        padding-left: 1rem; /* Add padding for separation */
      }
      #extractorCard > *:not(.extractor-images) {
      }
      #skillSearch {
        box-sizing: border-box;
        width: 100%;
      }
      /* Styles for Skill Domain Progress Bars */
      .domain-progress-item {
          margin-bottom: 12px;
      }
      .domain-progress-item p {
          margin: 0 0 4px 0;
          font-size: 0.9rem;
          color: var(--secondary-text);
      }
      .domain-progress-bar-container {
          width: 100%;
          background-color: var(--secondary-bg);
          border-radius: 12px;
          overflow: hidden;
          height: 12px;
          box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
      }
      .domain-progress-bar {
          height: 100%;
          background-color: var(--accent); /* Use accent color for the bar */
          border-radius: 12px;
          transition: width 0.5s ease-in-out;
      }
    </style>
    <style>
      /* Neon Glow Text */
      .neon-text {
        color: #fff;
        text-shadow:
          0 0 7px #fff,
          0 0 10px #fff,
          0 0 21px #fff,
          0 0 42px #00bfff,
          0 0 82px #00bfff,
          0 0 92px #00bfff,
          0 0 102px #00bfff,
          0 0 151px #00bfff;
      }
    </style>
    <style>
      /* Top Bar Styling */
      .top-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: var(--card-bg); /* Use card background for the top bar */
        color: var(--primary-text);
        padding: 0.5rem 1.5rem; /* Adjusted padding */
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: space-between; /* Space out content */
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        backdrop-filter: blur(8px) saturate(180%);
        -webkit-backdrop-filter: blur(8px) saturate(180%);
        border-bottom: 2px solid rgba(0, 123, 255, 0.15);
        box-sizing: border-box; /* Include padding in the element's total width and height */
      }
      .top-bar .project-info {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .top-bar .project-info img {
        height: 30px;
      }
      .top-bar .project-info h1 {
        font-size: 1.5rem;
        margin: 0;
        color: var(--accent);
      }
      .top-bar .github-links {
        display: flex;
        gap: 15px;
        align-items: center;
        /* margin-right: 20px; Removed margin, padding on parent handles spacing */
      }
      .top-bar .github-links a {
        color: var(--primary-text); /* Use primary text color for links */
        text-decoration: none;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: color 0.2s;
      }
      .top-bar .github-links a:hover {
        color: var(--accent); /* Accent color on hover */
      }
      .top-bar .theme-toggle {
          position: static; /* Remove fixed positioning */
          /* margin-left: 10px; Removed margin, padding on parent handles spacing */
          top: auto; /* Reset top */
          right: auto; /* Reset right */
      }
      @media (max-width: 768px) {
        .top-bar {
          flex-direction: column;
          height: auto;
          padding: 0.5rem 1rem; /* Adjusted padding */
          gap: 10px;
        }
        .top-bar .github-links {
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
           margin-right: 0; /* Remove margin on smaller screens */
        }
         body {
            padding-top: 90px; /* Adjust padding for smaller screens */
         }
         .top-bar .theme-toggle {
             margin-left: 0; /* Remove margin on smaller screens */
         }
      }
      @media (max-width: 500px) {
           body {
              padding-top: 120px; /* Adjust padding for very small screens */
           }
           .top-bar {
               padding: 0.5rem 0.8rem; /* Further adjusted padding for very small screens */
           }
        }
    </style>
    <style>
      /* General Animations */
      .fade-in {
        animation: fadeIn 1s ease-out;
      }
      @keyframes fadeIn {
        0% { opacity: 0; }
        100% { opacity: 1; }
      }

      .slide-in-left {
        animation: slideInLeft 0.8s ease-out;
      }
      @keyframes slideInLeft {
        0% { transform: translateX(-50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
      }

      .slide-in-right {
        animation: slideInRight 0.8s ease-out;
      }
      @keyframes slideInRight {
        0% { transform: translateX(50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
      }

      /* Add more specific animations as needed */
    </style>
    <style>
      /* Styles for external links grid and divider */
      .external-links-container {
        display: flex;
        justify-content: center;
        gap: 20px; /* Space between the two columns */
        flex-wrap: wrap; /* Allow wrapping on smaller screens */
        padding: 0 1rem; /* Add horizontal padding for consistent spacing */
      }

      .external-links-column {
        flex: 1;
        min-width: 280px; /* Minimum width for each column before wrapping */
        max-width: 400px;
      }

      .external-links-column ul {
          list-style: none;
          padding: 0;
          text-align: left;
          margin: 0 auto; /* Center the list within the column if the column is wider */
          max-width: 350px; /* Set a max width to prevent lists from becoming too wide */
      }

      .external-links-column li {
          margin: 0.8rem 0; /* Adjust vertical spacing */
      }

      .divider {
        border-left: 1px solid var(--secondary-text); /* Add a vertical divider */
      }

      /* Adjust layout for split view with divider */
       #extractorCard.extractor-split .extractor-left-content {
           border-right: 1px solid var(--secondary-text); /* Add divider in split view */
           padding-right: 2rem; /* Increase padding to the right */
       }

       #extractorCard.extractor-split .extractor-right-content {
           padding-left: 2rem; /* Increase padding to the left */
       }

       @media (max-width: 700px) {
           .external-links-container {
               flex-direction: column; /* Stack columns on smaller screens */
               gap: 0; /* Remove gap when stacked */
           }
           .external-links-column {
               min-width: unset; /* Remove min-width when stacked */
               max-width: 100%;
           }
           .external-links-column ul {
               margin-bottom: 1rem; /* Add space between stacked lists */
           }
           #extractorCard.extractor-split .extractor-left-content {
                border-right: none; /* Remove vertical divider when stacked */
                padding-right: 1rem; /* Revert padding */
           }
            #extractorCard.extractor-split .extractor-right-content {
                padding-left: 1rem; /* Revert padding */
            }
       }

    </style>
    <style>
      /* Styles for new top bar buttons */
      .top-bar-button {
        background: none;
        border: none;
        color: var(--primary-text);
        font-size: 1rem;
        font-family: inherit;
        cursor: pointer;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        transition: background 0.2s, color 0.2s;
      }
      .top-bar-button:hover {
        background: var(--accent);
        color: #fff;
      }
      @media (max-width: 768px) {
         .top-bar-button {
             padding: 0.3rem 0.6rem;
             font-size: 0.9rem;
         }
      }
       @media (max-width: 500px) {
          .top-bar-button {
              padding: 0.2rem 0.4rem;
              font-size: 0.8rem;
          }
       }
    </style>
  </head>
  <body>
    <!-- Top Bar -->
    <header class="top-bar">
      <div class="project-info">
        
        <h1>Resume Skill Extractor</h1>
      </div>
      <div class="github-links">
        <a href="https://github.com/abhishek-si-ngh" target="_blank">
          <i class="fab fa-github"></i> Abhishek Singh
        </a>
        <a href="https://github.com/Abhi110704" target="_blank">
          <i class="fab fa-github"></i> Abhiyanshu Anand
        </a>
        <a href="https://github.com/Sanskar2301" target="_blank">
          <i class="fab fa-github"></i> Sanskar Singh
        </a>
        <!-- New Scroll Buttons -->
        <button class="top-bar-button" id="scrollToInfoBtn">Information</button>
        <button class="top-bar-button" id="scrollToUploadBtn">Upload Resume</button>
      </div>
      <!-- Theme Toggle Button (Moved here) -->
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light mode">
        <i class="fas fa-moon"></i>
      </button>
    </header>

    <!-- Floating Social Icons -->
    <div class="floating-icons">
      <!-- GitHub icons are now handled by the React app -->
    </div>
    <div id="root">
      <div class="left-section fade-in">
        <h2>Resume Skill Extractor</h2>
        <div style="margin-bottom: 30px;"></div>
        <div style="margin-bottom: 20px;"></div>
        <p>Extract and analyze skills from your resume. Switch between dark and light mode for your comfort! <br><br> Our Resume Skill Extractor helps you quickly identify key skills from your PDF resumes. Simply upload your file, and our tool will process it to present a categorized list of skills. This can be incredibly useful for job seekers looking to optimize their resumes or for recruiters analyzing candidate profiles. Use the search bar to find specific skills or browse through the categorized list. You can also save your extraction history to revisit previous analyses. We hope this tool simplifies the process of understanding and leveraging your skills! </p>
        <p style="margin-top: 20px; font-size: 0.95rem; color: var(--secondary-text);">Looking to further enhance your resume? Check out these external tools that can help you analyze your resume's overall quality, provide a resume score, and offer suggestions for improvement:</p>
        <div class="external-links-container">
          <div class="external-links-column">
            <ul class="external-links-list">
              <li><a href="https://www.mployee.me/" target="_blank"><i class="fas fa-link"></i> Check Resume on mployee.me <i class="fas fa-arrow-right"></i></a></li>
              <li><a href="https://www.resumeworded.com/" target="_blank"><i class="fas fa-link"></i> Try ResumeWorded <i class="fas fa-arrow-right"></i></a></li>
            </ul>
          </div>
          <div class="external-links-column">
            <ul class="external-links-list">
              <li><a href="https://zety.com/resume-check" target="_blank"><i class="fas fa-link"></i> Use Zety Resume Checker <i class="fas fa-arrow-right"></i></a></li>
              <li><a href="https://github.com/Abhi110704/Resume-Skill-Extractor" target="_blank"><i class="fab fa-github"></i> Check out our project on GitHub <i class="fas fa-arrow-right"></i></a></li>
            </ul>
          </div>
        </div>
        <!-- Expand Button (initially hidden) -->
        <button id="expandLeftSectionBtn" style="display: none; margin-top: 1rem; padding: 0.5rem 1rem; cursor: pointer; border-radius: 20px; border: none; background-color: var(--accent); color: white; font-size: 1rem;">Expand Reading Section</button>
         
         <!-- Scroll to History Button -->
        <button id="scrollToHistoryBtn" style="margin-top: 1rem; padding: 0.5rem 1rem; cursor: pointer; border-radius: 20px; border: none; background-color: var(--accent); color: white; font-size: 1rem; display: none;">Go to History</button>
      </div>
      <div class="right-section fade-in">
        <!-- Resume Upload and Skill Extraction Section (with illustration) -->
        <div id="extractorCard" class="fade-in">
          <div class="extractor-left-content">
            <div class="extractor-images">
              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="User Icon" class="extractor-illustration" />
              <img src="https://cdn-icons-png.flaticon.com/512/1055/1055687.png" alt="Resume Icon" class="extractor-illustration" />
              <img src="https://cdn-icons-png.flaticon.com/512/2922/2922510.png" alt="Profile Icon" class="extractor-illustration" />
            </div>
            <h3>Upload Your Resume (PDF)</h3>
            <div class="extractor-actions">
              <div class="extractor-file-row">
                <input type="file" id="resumeFile" accept="application/pdf" />
                <button id="uploadBtn" onclick="uploadResume()">Extract Skills</button>
              </div>
            </div>
            <div id="status"></div>
            <input type="text" id="skillSearch" placeholder="Search skill..." style="margin-bottom: 12px; width: 100%; max-width: 350px; padding: 8px; border-radius: 8px; border: 1px solid #bbb; font-size: 1rem;" oninput="filterSkills()" />
            <!-- Skill Domain Progress Bars (Moved here) -->
            <div id="domainProgress" style="width: 100%; max-width: 400px; margin: 20px auto;"></div>
            <!-- View History Button -->
            <button id="showHistoryBtn" style="margin-top: 1rem; padding: 0.6rem 1.5rem; cursor: pointer; border-radius: 20px; border: none; background-color: var(--accent); color: white; font-size: 1rem; display: none;">View History</button>
          </div>
          <div class="extractor-right-content">
            <div id="skillsList"></div>
            <!-- Clear Skills Button -->
            <button id="clearSkillsBtn" style="margin-top: 1rem; padding: 0.6rem 1.5rem; cursor: pointer; border-radius: 20px; border: none; background-color: #ff4d4d; color: white; font-size: 1rem; transition: background-color 0.2s;" >Clear Skills</button>
          </div>
        </div>
        <!-- Extraction History Section (moved back inside right-section) -->
        <div id="historySection">
          <h3>Extraction History</h3>
          <div id="historyList"></div>
          
        </div>
      </div>
      <footer>
        &copy; 2025 Abhiyanshu Anand, Sanskar Singh, Abhishek Singh
      </footer>
    </div>
    <!-- Decorative Corner Images -->
    
    
    <!-- Floating Decorative Images -->
    <img src="https://cdn-icons-png.flaticon.com/512/1055/1055687.png" class="floating-img float-diag" alt="Floating Resume" style="top: 5%; right: 5%; animation-delay: 0s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/1055/1055676.png" class="floating-img float-diag2" alt="Floating Laptop" style="top: 10%; left: 85%; animation-delay: 3s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/1055/1055679.png" class="floating-img float-left-right" alt="Floating Certificate" style="bottom: 10%; left: 5%; animation-delay: 1.5s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135783.png" class="floating-img float-fast" alt="Floating Calendar" style="top: 5%; right: 10%; animation-delay: 2.2s;" />
    <!-- Floating Skill Icons -->
    <img src="https://cdn-icons-png.flaticon.com/512/5968/5968350.png" class="floating-img float-diag" alt="Floating Python Icon" style="top: 15%; left: 5%; animation-delay: 0.5s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/277/277128.png" class="floating-img float-diag2" alt="Floating SQL Icon" style="top: 35%; right: 5%; animation-delay: 1.8s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/5968/5968292.png" class="floating-img float-left-right" alt="Floating JavaScript Icon" style="bottom: 15%; left: 5%; animation-delay: 2.5s;" />
    <!-- Additional Floating Skill Icons -->
    <img src="https://cdn-icons-png.flaticon.com/512/6132/6132222.png" class="floating-img float-fast" alt="Floating C++ Icon" style="top: 5%; right: 15%; animation-delay: 1s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/226/226777.png" class="floating-img float-diag" alt="Floating Java Icon" style="top: 60%; left: 5%; animation-delay: 3s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/755/755978.png" class="floating-img float-diag2" alt="Floating React Icon" style="top: 25%; right: 15%; animation-delay: 0.2s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/755/755981.png" class="floating-img float-left-right" alt="Floating Angular Icon" style="bottom: 5%; right: 25%; animation-delay: 1.5s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/919/919853.png" class="floating-img float-fast" alt="Floating Docker Icon" style="bottom: 15%; right: 10%; animation-delay: 0.8s;" />
    <img src="https://cdn-icons-png.flaticon.com/512/5968/5968420.png" class="floating-img float-diag" alt="Floating AWS Icon" style="top: 10%; left: 15%; animation-delay: 2.8s;" />
    <script>
      // Theme toggle logic
      const themeToggle = document.getElementById('themeToggle');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        themeToggle.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
      }
      // Initial theme
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        setTheme(savedTheme);
      } else {
        setTheme(prefersDark ? 'dark' : 'light');
      }
      themeToggle.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme');
        setTheme(current === 'dark' ? 'light' : 'dark');
      });

      // Resume upload and skill extraction
      let extractedSkills = [];
      async function uploadResume() {
        const fileInput = document.getElementById("resumeFile");
        const status = document.getElementById("status");
        const skillsList = document.getElementById("skillsList");
        const skillSearch = document.getElementById("skillSearch");
        
        const scrollToHistoryBtn = document.getElementById('scrollToHistoryBtn');

        skillsList.innerHTML = "";
        status.innerText = "";
        extractedSkills = [];
        if (skillSearch) skillSearch.value = "";

        if (!fileInput.files.length) {
          status.innerText = "Please select a PDF file.";
          return;
        }

        const formData = new FormData();
        formData.append("file", fileInput.files[0]);

        status.innerText = "File selected, attempting upload...";

        try {
          const response = await fetch("https://resume-backend-atll.onrender.com/extract-skills/", {
            method: "POST",
            body: formData,
          });
          const data = await response.json();
          status.innerText = data.message || "";
          if (data.skills && data.skills.length) {
            extractedSkills = data.skills;
            const categorized = categorizeSkills(extractedSkills);
            renderSkills(categorized);
          } else {
            if (!data.message) {
              skillsList.innerText = "No skills found.";
            }
          }
        } catch (err) {
          console.error(err);
          status.innerText = "Failed to extract skills. Make sure your backend is running.";
        }

        // Save to history
        if (extractedSkills.length > 0) {
          console.log('Attempting to save history.');
          saveHistory(fileInput.files[0].name, extractedSkills);
          console.log('History saved.');
          // Show history section if hidden
          const historySection = document.getElementById('historySection');
          if (historySection) {
            historySection.style.display = ''; // Show the section
          }
          // Scroll to the extractor card section
          document.getElementById('extractorCard').scrollIntoView({ behavior: 'smooth' });

          // Show View History button after extraction if there's history
          const showHistoryBtn = document.getElementById('showHistoryBtn');
          if (showHistoryBtn) {
              showHistoryBtn.style.display = 'block';
          }

          // Add event listener for Clear Skills button
          const clearSkillsBtn = document.getElementById('clearSkillsBtn');
          if (clearSkillsBtn) {
              clearSkillsBtn.addEventListener('click', clearSkills);
          }
        }
      }

      // Define skill categories and keywords
      const skillCategories = {
        "Programming Languages": [
          "python", "java", "javascript", "typescript", "c", "c++", "c#", "kotlin", "swift", "go", "ruby", "php", "r", "matlab", "scala", "rust"
        ],
        "Web Technologies & Frameworks": [
          "html", "css", "sass", "less", "bootstrap", "tailwind", "react", "angular", "vue", "nodejs", "express", "nextjs", "flask", "django", "fastapi", "spring", "laravel"
        ],
        "Databases": [
          "mysql", "postgresql", "mongodb", "sqlite", "oracle", "firebase", "redis", "cassandra", "neo4j"
        ],
        "Cloud & DevOps": [
          "aws", "azure", "gcp", "heroku", "render", "netlify", "docker", "kubernetes", "jenkins", "terraform", "ansible", "nginx"
        ],
        "Data Science & Machine Learning": [
          "pandas", "numpy", "scipy", "matplotlib", "seaborn", "scikit-learn", "tensorflow", "keras", "pytorch", "xgboost", "lightgbm",
          "nlp", "opencv", "machine learning", "deep learning", "data analysis", "data science", "statistics", "ai"
        ],
        "Big Data & ETL": [
          "hadoop", "spark", "hive", "pig", "airflow", "kafka", "tableau", "powerbi", "excel", "etl"
        ],
        "Tools & Platforms": [
          "git", "github", "gitlab", "bitbucket", "jira", "notion", "postman", "vs code", "vim", "intellij"
        ],
        "Testing": [
          "selenium", "pytest", "unittest", "junit", "cypress", "mocha", "chai"
        ],
        "Soft Skills": [
          "communication", "leadership", "teamwork", "problem solving", "critical thinking", "time management",
          "project management", "adaptability", "creativity", "negotiation", "presentation", "public speaking"
        ]
      };

      // Function to categorize skills
      function categorizeSkills(skills) {
        const categorized = {};
        const lowerCaseSkillCategories = {};
        // Create a lower-case version of skillCategories for easier matching
        for (const category in skillCategories) {
            lowerCaseSkillCategories[category] = skillCategories[category].map(keyword => keyword.toLowerCase());
        }

        skills.forEach(skill => {
          const lowerSkill = skill.toLowerCase();
          let foundCategory = false;
          for (const category in lowerCaseSkillCategories) {
            if (lowerCaseSkillCategories[category].some(keyword => lowerSkill.includes(keyword))) {
              if (!categorized[category]) {
                categorized[category] = [];
              }
              categorized[category].push(skill);
              foundCategory = true;
              break; // Assume a skill belongs to the first matching category
            }
          }
          if (!foundCategory) {
            if (!categorized["Other"]) {
              categorized["Other"] = [];
            }
            categorized["Other"].push(skill);
          }
        });
        return categorized;
      }

      // Modify renderSkills to handle categorized data
      function renderSkills(categorizedSkills) {
        const skillsList = document.getElementById("skillsList");
        const domainProgressDiv = document.getElementById("domainProgress");

        skillsList.innerHTML = "";
        if (domainProgressDiv) domainProgressDiv.innerHTML = ""; // Clear previous progress bars

        const categories = Object.keys(categorizedSkills);
        if (categories.length === 0 || (categories.length === 1 && categories[0] === "Other" && categorizedSkills["Other"].length === 0)) {
             skillsList.innerText = "No matching skills found.";
             return;
        }

        // Calculate max skills in a single domain for progress bar scaling
        let maxSkillsInDomain = 0;
        for (const category of categories) {
            if (categorizedSkills[category].length > maxSkillsInDomain) {
                maxSkillsInDomain = categorizedSkills[category].length;
            }
        }

        // Render progress bars
        if (domainProgressDiv) {
            for (const category of categories) {
                if (categorizedSkills[category].length > 0) {
                    const skillCount = categorizedSkills[category].length;
                    const percentage = maxSkillsInDomain > 0 ? (skillCount / maxSkillsInDomain) * 100 : 0;

                    const progressItemHtml = `
                        <div class="domain-progress-item">
                            <p>${category} (${skillCount})</p>
                            <div class="domain-progress-bar-container">
                                <div class="domain-progress-bar" style="width: ${percentage}%;"></div>
                            </div>
                        </div>
                    `;
                    domainProgressDiv.innerHTML += progressItemHtml;
                }
            }
        }

        // Render categorized skills list
        for (const category of categories) {
          if (categorizedSkills[category].length > 0) {
            const categoryHeading = document.createElement("h4");
            categoryHeading.innerText = `${category} (${categorizedSkills[category].length})`; // Add count
            categoryHeading.style.marginTop = "1.5rem";
            categoryHeading.style.marginBottom = "0.8rem";
            categoryHeading.style.color = "var(--primary-text)";
            categoryHeading.style.textAlign = "left";
            categoryHeading.style.width = "100%";
            categoryHeading.style.maxWidth = "350px";
            categoryHeading.style.margin = "1.5rem auto 0.8rem auto";


            skillsList.appendChild(categoryHeading);

            const skillsContainer = document.createElement("div");
            skillsContainer.style.display = "flex";
            skillsContainer.style.flexWrap = "wrap";
            skillsContainer.style.gap = "8px";
            skillsContainer.style.justifyContent = "center";
            skillsContainer.style.marginTop = "0.5rem";
            skillsContainer.style.marginBottom = "1rem";


            categorizedSkills[category].forEach(skill => {
              const chip = document.createElement("span");
              // Add icon placeholder - replace with actual icons later if needed
              const iconHtml = getSkillIcon(skill);
              chip.innerHTML = `${iconHtml}${skill}`;
              chip.className = "skill-chip";
              skillsContainer.appendChild(chip);
            });
            skillsList.appendChild(skillsContainer);
          }
        }
      }

      // Helper function to get skill icon (placeholder)
      function getSkillIcon(skill) {
          const lowerSkill = skill.toLowerCase();
          // Basic icon mapping (expand as needed)
          if (lowerSkill.includes('python')) return '<i class="fab fa-python"></i> ';
          if (lowerSkill.includes('java')) return '<i class="fab fa-java"></i> ';
          if (lowerSkill.includes('javascript') || lowerSkill.includes('js')) return '<i class="fab fa-js"></i> ';
          if (lowerSkill.includes('react')) return '<i class="fab fa-react"></i> ';
          if (lowerSkill.includes('angular')) return '<i class="fab fa-angular"></i> ';
          if (lowerSkill.includes('vue')) return '<i class="fab fa-vuejs"></i> ';
          if (lowerSkill.includes('html')) return '<i class="fab fa-html5"></i> ';
          if (lowerSkill.includes('css')) return '<i class="fab fa-css3-alt"></i> ';
          if (lowerSkill.includes('git')) return '<i class="fab fa-git-alt"></i> ';
          if (lowerSkill.includes('github')) return '<i class="fab fa-github"></i> ';
          if (lowerSkill.includes('docker')) return '<i class="fab fa-docker"></i> ';
          if (lowerSkill.includes('aws')) return '<i class="fab fa-aws"></i> ';
          // Add more mappings for other skills/domains
          return ''; // Default empty string if no icon found
      }

      function filterSkills() {
        const skillSearch = document.getElementById("skillSearch");
        const query = skillSearch.value.trim().toLowerCase();
        if (!query) {
          renderSkills(categorizeSkills(extractedSkills)); // Recategorize and render all if query is empty
        } else {
          const filtered = extractedSkills.filter(skill => skill.toLowerCase().includes(query));
          renderSkills(categorizeSkills(filtered)); // Categorize and render filtered skills
        }
      }

      // Function to save history to local storage
      function saveHistory(filename, skills) {
        console.log('saveHistory called with:', {filename, skills});
        const history = JSON.parse(localStorage.getItem('extractionHistory') || '[]');
        console.log('Current history from local storage:', history);
        const newEntry = {
          filename: filename,
          skills: skills,
          timestamp: new Date().toISOString()
        };
        history.push(newEntry);
        console.log('New history array:', history);
        try {
            localStorage.setItem('extractionHistory', JSON.stringify(history));
            console.log('History successfully written to local storage.');
        } catch (e) {
            console.error('Error saving history to local storage:', e);
        }
        renderHistory(); // Re-render history after saving
        console.log('renderHistory called from saveHistory.');
      }

      // Function to render history from local storage
      function renderHistory() {
        console.log('renderHistory called.');
        const historyListDiv = document.getElementById('historyList');
        if (!historyListDiv) {
            console.log('historyListDiv not found.');
            return;
        }

        const history = JSON.parse(localStorage.getItem('extractionHistory') || '[]');
        console.log('History read from local storage for rendering:', history);
        historyListDiv.innerHTML = ''; // Clear current list

        if (history.length === 0) {
          historyListDiv.innerHTML = '<p>No history yet.</p>';
          console.log('History is empty, hiding history section.');
          // Hide history section if empty
          const historySection = document.getElementById('historySection');
          if (historySection) {
            historySection.style.display = 'none';
          }
          return;
        }

        // Show history section if there is history data
        const historySection = document.getElementById('historySection');
        if (historySection) {
          historySection.style.display = ''; // Show the section
          console.log('History is not empty, showing history section.');
        }

        history.forEach(entry => {
          console.log('Rendering history entry:', entry);
          const entryElement = document.createElement('div');
          entryElement.className = 'history-entry';
          // Basic display: filename and timestamp
          const date = new Date(entry.timestamp);
          entryElement.innerHTML = `
            <div class="history-entry-info">
                <p class="history-entry-name"><strong>${entry.filename}</strong></p>
                <p>${date.toLocaleString()}</p>
                <p>${entry.skills.length} skills extracted</p>
            </div>
             <div class="history-entry-actions">
                <i class="fas fa-trash history-entry-delete" data-timestamp="${entry.timestamp}"></i>
            </div>
          `;
          // Add click listener to load history
          entryElement.querySelector('.history-entry-info').addEventListener('click', () => loadFromHistory(entry.skills));
          // Add click listener for delete button
          entryElement.querySelector('.history-entry-delete').addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent triggering the loadFromHistory click
            deleteHistoryEntry(e.target.dataset.timestamp);
          });

          historyListDiv.appendChild(entryElement);
        });
      }

      // Function to delete a history entry
      function deleteHistoryEntry(timestamp) {
        let history = JSON.parse(localStorage.getItem('extractionHistory') || '[]');
        history = history.filter(entry => entry.timestamp !== timestamp);
        localStorage.setItem('extractionHistory', JSON.stringify(history));
        renderHistory(); // Re-render history after deletion
      }

      // Function to load skills from a history entry
      function loadFromHistory(skills) {
        extractedSkills = skills; // Set the current extractedSkills to the historical data
        const categorized = categorizeSkills(extractedSkills);
        renderSkills(categorized); // Render the historical skills
        const status = document.getElementById("status");
        if (status) status.innerText = `Loaded ${skills.length} skills from history.`;
        const skillSearch = document.getElementById("skillSearch");
        if (skillSearch) skillSearch.value = ""; // Clear search input

        // Hide the scroll-to-extractor button and show the scroll-to-history button
        const scrollToExtractorBtn = document.getElementById('scrollToExtractorBtn');
        const scrollToHistoryBtn = document.getElementById('scrollToHistoryBtn');
         if (scrollToExtractorBtn) scrollToExtractorBtn.style.display = 'none';
         if (scrollToHistoryBtn) scrollToHistoryBtn.style.display = 'block';
      }

      // Function to clear extracted skills
      function clearSkills() {
          extractedSkills = [];
          const skillsList = document.getElementById('skillsList');
          const domainProgressDiv = document.getElementById("domainProgress");
          if (skillsList) skillsList.innerHTML = '';
          if (domainProgressDiv) domainProgressDiv.innerHTML = ''; // Clear progress bars
          const status = document.getElementById('status');
          if (status) status.innerText = 'Skills cleared.';
          const skillSearch = document.getElementById('skillSearch');
          if (skillSearch) skillSearch.value = '';

          // Optionally, revert the layout back to initial state
          const leftSection = document.querySelector('.left-section');
          const rightSection = document.querySelector('.right-section');
          const extractorCard = document.getElementById('extractorCard');
          const historySection = document.getElementById('historySection');

          if (leftSection) leftSection.classList.remove('collapsed-left');
          if (rightSection) rightSection.classList.remove('expanded-right');
          if (extractorCard) extractorCard.classList.remove('extractor-split');

          // Hide history section
          if (historySection) historySection.style.display = 'none';

          // Show scroll-to-extractor button and hide scroll-to-history button
          
          const scrollToHistoryBtn = document.getElementById('scrollToHistoryBtn');
            
            if (scrollToHistoryBtn) scrollToHistoryBtn.style.display = 'none';

            // Hide View History button
            const showHistoryBtn = document.getElementById('showHistoryBtn');
            if (showHistoryBtn) {
                 showHistoryBtn.style.display = 'none';
                 console.log('View History button display set to none in clearSkills.');
            }
      }

      // Call renderHistory on page load
      renderHistory();
      console.log('Initial renderHistory call on page load.');

      // Add event listener for the expand button
      const expandButton = document.getElementById('expandLeftSectionBtn');
      if (expandButton) {
          expandButton.addEventListener('click', () => {
              const leftSection = document.querySelector('.left-section');
              const rightSection = document.querySelector('.right-section');
              if (leftSection) leftSection.classList.remove('collapsed-left');
              if (rightSection) rightSection.classList.remove('expanded-right');
              // Hide the expand button when expanded
              expandButton.style.display = 'none';
              // Remove split class from extractorCard
              const extractorCard = document.getElementById('extractorCard');
              if (extractorCard) extractorCard.classList.remove('extractor-split');
              // Need to make the content within the left section visible again
              // Removing the collapsed-left class should handle this due to the CSS rule

               // Show the scroll-to-extractor button again
               
               // Hide scroll-to-history button
               const scrollToHistoryBtn = document.getElementById('scrollToHistoryBtn');
               if (scrollToHistoryBtn) {
                   scrollToHistoryBtn.style.display = 'none';
               }

               // Hide View History button
               const showHistoryBtn = document.getElementById('showHistoryBtn');
               if (showHistoryBtn) {
                   showHistoryBtn.style.display = 'none';
                   console.log('View History button display set to none in expand button handler.');
               }
          });
      }

      // Also handle reverting the extractorCard split when the main sections are expanded back
      const leftSection = document.querySelector('.left-section');
      if (leftSection) {
          leftSection.addEventListener('transitionend', () => {
              // This event might fire for other transitions, so we need to check
              // A simple check is to see if the collapsed-left class is absent
              if (!leftSection.classList.contains('collapsed-left')) {
                  const extractorCard = document.getElementById('extractorCard');
                  if (extractorCard) extractorCard.classList.remove('extractor-split');
              }
          });
      }

       // Add event listener for scroll-to-history button
       const scrollToHistoryBtn = document.getElementById('scrollToHistoryBtn');
       if (scrollToHistoryBtn) {
           scrollToHistoryBtn.addEventListener('click', () => {
               const historySection = document.getElementById('historySection');
               console.log('History button clicked.');
               console.log('History section element:', historySection);
               console.log('History section display style:', historySection ? historySection.style.display : 'N/A');
               // Ensure history section is visible before attempting to scroll
               if (historySection && historySection.style.display !== 'none') {
                    historySection.scrollIntoView({ behavior: 'smooth' });
                    console.log('Scrolled to history section.');
               } else {
                   console.log('History section not visible, not scrolling.');
               }
           });
       }
        renderHistory();
        console.log('Second renderHistory call at the end of the script.');

       // Add event listeners for the new top bar buttons
       const scrollToInfoButton = document.getElementById('scrollToInfoBtn');
       if (scrollToInfoButton) {
           scrollToInfoButton.addEventListener('click', () => {
               const infoSection = document.querySelector('.left-section');
               if (infoSection) {
                   infoSection.scrollIntoView({ behavior: 'smooth' });
               }
           });
       }

       const scrollToUploadButton = document.getElementById('scrollToUploadBtn');
       if (scrollToUploadButton) {
           scrollToUploadButton.addEventListener('click', () => {
               const uploadSection = document.getElementById('extractorCard');
               if (uploadSection) {
                   uploadSection.scrollIntoView({ behavior: 'smooth' });
               }
           });
       }

       // Add event listener for the View History button in extractorCard
       const showHistoryButton = document.getElementById('showHistoryBtn');
       if (showHistoryButton) {
           showHistoryButton.addEventListener('click', () => {
               console.log('View History button clicked.');
               const historySection = document.getElementById('historySection');
               if (historySection) {
                   console.log('History section element found.', historySection);
                   console.log('History section display style:', historySection.style.display);
                   // Ensure history section is visible before attempting to scroll
                   if (historySection.style.display === 'none') {
                       historySection.style.display = ''; // Make visible if hidden
                       console.log('History section made visible.');
                   }
                   historySection.scrollIntoView({ behavior: 'smooth' });
                   console.log('Scrolled to history section.');
               } else {
                   console.log('History section element not found.');
               }
           });
       }
    </script>
  </body>
</html>
